<!DOCTYPE html><html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#000000">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="manifest" href="../assets/manifest.json">
    <link rel="icon" href="../assets/favicon.png">
    <link rel="stylesheet" href="../assets/global_styles.css">
    <link rel="stylesheet" href="../assets/artist_styles.css">
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;fafca58fc0304523be0fede299408817&quot;}"></script>
    <title>Algar</title>
</head>

<body>
    <nav>
        <p><a href="../index.html">Index</a> / Algar</p>
        <p><span>Cached On</span> Fri Jan 09 2026</p>
    </nav>
    <header>
        <div class="header-artist"><img class="cover-art small" src="https://i.scdn.co/image/ab6761610000e5ebbd611059fbd303ff90147a5d" alt="Algar"><a class="cover-art-link" href="spotify:artist:6eW6zL3XCxzDljbDFGXklR"><img class="cover-art large" src="https://i.scdn.co/image/ab6761610000e5ebbd611059fbd303ff90147a5d" alt="Algar"></a><img class="cover-art medium" src="https://i.scdn.co/image/ab6761610000e5ebbd611059fbd303ff90147a5d" alt="Algar"></div>
        <div class="header-meta">
            <p><span>Followers</span> 3,036</p>
            <p><span>Popularity</span> 20</p>
            <p class="genre-list"></p>
        </div>
    </header>
    <main data-artist-name="algar">
        <div class="filters">
            <div class="release-year-filters"><label for="year-all"><input name="release-year" type="radio" id="year-all" value="year-all" checked>all</label><label for="2018"><input name="release-year" type="radio" id="2018" value="2018">2018</label><label for="2016"><input name="release-year" type="radio" id="2016" value="2016">2016</label><label for="2015"><input name="release-year" type="radio" id="2015" value="2015">2015</label><label for="2012"><input name="release-year" type="radio" id="2012" value="2012">2012</label><label for="2011"><input name="release-year" type="radio" id="2011" value="2011">2011</label></div>
            <div class="viewed-filters"><label for="everything"><input name="viewed-filter" type="radio" id="everything" value="everything">everything</label><label for="new"><input name="viewed-filter" type="radio" id="new" value="new" checked> new</label><label for="viewed"><input name="viewed-filter" type="radio" id="viewed" value="viewed">viewed</label></div>
        </div>
        <div class="albums-list">
            <section class="album visible" data-release-year="2018"><a href="spotify:album:13lXGY3eUuPGyH3Igcg17e"><img class="album-cover-art" src="https://i.scdn.co/image/ab67616d0000b2732ab028294547647b583310b7" alt="Adventure 2.0"></a>
                <div class="album-meta">
                    <h2 class="album-name"><a href="spotify:album:13lXGY3eUuPGyH3Igcg17e">Adventure 2.0</a></h2>
                    <p class="artist-list">Algar</p>
                    <p><span>2018-10-23</span> - album </p><button type="button" class="viewed-button" data-artist-name="algar" data-album-name="adventure 2.0">…</button>
                </div>
            </section>
            <section class="album visible" data-release-year="2018"><a href="spotify:album:1rccPE0Xwt1AQ58d5vR22n"><img class="album-cover-art" src="https://i.scdn.co/image/ab67616d0000b273214c19969cda78496f478b9b" alt="Coffee Bits"></a>
                <div class="album-meta">
                    <h2 class="album-name"><a href="spotify:album:1rccPE0Xwt1AQ58d5vR22n">Coffee Bits</a></h2>
                    <p class="artist-list">Algar</p>
                    <p><span>2018-08-27</span> - album </p><button type="button" class="viewed-button" data-artist-name="algar" data-album-name="coffee bits">…</button>
                </div>
            </section>
            <section class="album visible" data-release-year="2016"><a href="spotify:album:76iBv3aD3DvaWk4zPiLed2"><img class="album-cover-art" src="https://i.scdn.co/image/ab67616d0000b2736c0f4b92d16b4ea375650df5" alt="Chiptunes on Steroids"></a>
                <div class="album-meta">
                    <h2 class="album-name"><a href="spotify:album:76iBv3aD3DvaWk4zPiLed2">Chiptunes on Steroids</a></h2>
                    <p class="artist-list">Algar</p>
                    <p><span>2016-11-22</span> - album </p><button type="button" class="viewed-button" data-artist-name="algar" data-album-name="chiptunes on steroids">…</button>
                </div>
            </section>
            <section class="album visible" data-release-year="2015"><a href="spotify:album:0Q2EyUn9ay1knRlH54aTwO"><img class="album-cover-art" src="https://i.scdn.co/image/ab67616d0000b2739275b815138fd00736e74554" alt="I Grew Up With Video Games"></a>
                <div class="album-meta">
                    <h2 class="album-name"><a href="spotify:album:0Q2EyUn9ay1knRlH54aTwO">I Grew Up With Video Games</a></h2>
                    <p class="artist-list">Algar</p>
                    <p><span>2015-03-09</span> - album </p><button type="button" class="viewed-button" data-artist-name="algar" data-album-name="i grew up with video games">…</button>
                </div>
            </section>
            <section class="album visible" data-release-year="2012"><a href="spotify:album:7jrnDHV8Cl06ZRWNoUuOd8"><img class="album-cover-art" src="https://i.scdn.co/image/ab67616d0000b273822e25723138c02d6f8b94f3" alt="Chiptunes In Stereo"></a>
                <div class="album-meta">
                    <h2 class="album-name"><a href="spotify:album:7jrnDHV8Cl06ZRWNoUuOd8">Chiptunes In Stereo</a></h2>
                    <p class="artist-list">Algar</p>
                    <p><span>2012-12-20</span> - album </p><button type="button" class="viewed-button" data-artist-name="algar" data-album-name="chiptunes in stereo">…</button>
                </div>
            </section>
            <section class="album visible" data-release-year="2012"><a href="spotify:album:4l60bso5XNWBPhprbk5jXP"><img class="album-cover-art" src="https://i.scdn.co/image/ab67616d0000b273260f47d0091091bea9f0d38f" alt="Följ Mig Ut På Ängen"></a>
                <div class="album-meta">
                    <h2 class="album-name"><a href="spotify:album:4l60bso5XNWBPhprbk5jXP">Följ Mig Ut På Ängen</a></h2>
                    <p class="artist-list">Algar</p>
                    <p><span>2012-06-11</span> - single - 3 track</p><button type="button" class="viewed-button" data-artist-name="algar" data-album-name="följ mig ut på ängen">…</button>
                </div>
            </section>
            <section class="album visible" data-release-year="2011"><a href="spotify:album:7IravcyqkzAYmy7u4g8aC8"><img class="album-cover-art" src="https://i.scdn.co/image/ab67616d0000b27322c98c9935d712699ef68f0e" alt="Christer Sjögrens favoriter 2003-2006"></a>
                <div class="album-meta">
                    <h2 class="album-name"><a href="spotify:album:7IravcyqkzAYmy7u4g8aC8">Christer Sjögrens favoriter 2003-2006</a></h2>
                    <p class="artist-list">Algar</p>
                    <p><span>2011-11-19</span> - album </p><button type="button" class="viewed-button" data-artist-name="algar" data-album-name="christer sjögrens favoriter 2003-2006">…</button>
                </div>
            </section>
            <section class="album visible" data-release-year="2011"><a href="spotify:album:2RgCceTbMPLcIV7qiMJVph"><img class="album-cover-art" src="https://i.scdn.co/image/ab67616d0000b273bdc5b9081ae8a48fbe33161e" alt="Morgonstund"></a>
                <div class="album-meta">
                    <h2 class="album-name"><a href="spotify:album:2RgCceTbMPLcIV7qiMJVph">Morgonstund</a></h2>
                    <p class="artist-list">Algar</p>
                    <p><span>2011-06-30</span> - album </p><button type="button" class="viewed-button" data-artist-name="algar" data-album-name="morgonstund">…</button>
                </div>
            </section>
        </div>
    </main>
    <script type="module">
        /*
         * I enabled CORS on `mhunter-backend` so these aren't a problem directly from the browser
         */

        /**
         * @typedef {Object} Artist
         * @property {string} name
         * @property {string[]} viewed
         */

        /**
         * @param {string} name
         * @returns {Promise<Artist>}
         */
        export async function fetch_artist_viewed(artist_name) {
            const response = await fetch(
                `https://mhunter-backend.vercel.app/artist?name=${artist_name}`,
            )

            return response.json()
        }

        export async function update_artist_viewed(artist_name, viewed_array) {
            const password_hash = localStorage.getItem('super_secret')

            const response = await fetch(
                `https://mhunter-backend.vercel.app/artist?name=${artist_name}&super_secret=${password_hash}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(viewed_array),
                },
            )

            return response.json()
        }

        // deno-lint-ignore-file no-window

        // Initial page load, get latest viewed albums
        const $main = document.querySelector('main')

        /**
         * @typedef {Object} Artist
         * @property {string} name
         * @property {string[]} viewed
         */

        /** @type {Artist} */
        const artist = await fetch_artist_viewed($main.dataset.artistName)

        window.__artist = artist ?? {
            name: $main.dataset.artistName,
            viewed: []
        }

        const $viewed_buttons = document.querySelectorAll('.viewed-button')

        $viewed_buttons.forEach(($button) => {
            $button.addEventListener('click', toggle_viewed_status)

            if (window.__artist.viewed.includes($button.dataset.albumName)) {
                $button.innerHTML = 'Viewed'
                $button.classList.add('is-viewed')
            } else {
                $button.innerHTML = 'New'
            }
        })

        const $year_filters = document.querySelectorAll('input[name="release-year"]')

        $year_filters.forEach(($input) => {
            $input.addEventListener('click', filter_by_year)
        })

        const $viewed_filters = document.querySelectorAll('input[name="viewed-filter"]')

        $viewed_filters.forEach(($input) => {
            $input.addEventListener('click', filter_by_viewed_status)
        })

        // Fake an event on initial page load to default to only showing new albums
        // filter_by_viewed_status({ currentTarget: { value: 'new' } })

        function filter_by_year(event) {
            const filter_selection = event.currentTarget.value

            if (filter_selection === 'year-all') {
                for (const $album of document.querySelectorAll('.album')) {
                    $album.classList.remove('hidden')
                    $album.classList.add('visible')
                }

                return
            }

            for (const $album of document.querySelectorAll('.album')) {
                if ($album.dataset.releaseYear === filter_selection) {
                    $album.classList.remove('hidden')
                    $album.classList.add('visible')
                } else {
                    $album.classList.remove('visible')
                    $album.classList.add('hidden')
                }
            }
        }

        function filter_by_viewed_status(event) {
            const filter_selection = event.currentTarget.value

            if (filter_selection === 'everything') {
                for (const $album of document.querySelectorAll('.album')) {
                    $album.style.display = 'flex'
                }

                return
            }

            document.querySelectorAll('section:has(.is-viewed)').forEach(($album) => {
                $album.style.display = filter_selection === 'new' ? 'none' : 'flex'
            })

            document.querySelectorAll('section:not(:has(.is-viewed))').forEach(($album) => {
                $album.style.display = filter_selection === 'new' ? 'flex' : 'none'
            })
        }

        async function toggle_viewed_status(event) {
            const $button = event.currentTarget
            const artist = window.__artist

            if ($button.classList.contains('is-viewed')) {
                const album_index = artist.viewed.indexOf($button.dataset.albumName)

                artist.viewed.splice(album_index, 1)

                $button.innerHTML = 'New'
                $button.classList.remove('is-viewed')
            } else {
                artist.viewed.push($button.dataset.albumName)
                artist.viewed.sort()

                $button.innerHTML = 'Viewed'
                $button.classList.add('is-viewed')
            }

            await update_artist_viewed(artist.name, artist.viewed)
        }
    </script>
</body>

</html>